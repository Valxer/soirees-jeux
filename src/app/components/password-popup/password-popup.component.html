<div class="popup-overlay" (click)="cancel.emit()">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="cancel.emit()">&times;</button>
    <h3>{{ title }}</h3>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <p *ngIf="mode === 'setup'">
        C'est votre première connexion en tant qu'admin. Veuillez définir un mot de passe.
      </p>

      <input type="password" placeholder="Mot de passe" formControlName="password">
      
      @if (mode === 'setup') {
        <input type="password" placeholder="Confirmez le mot de passe" formControlName="confirmPassword">
      }
      
      @if (error) {
        <p class="error-message">{{ error }}</p>
      }

      <button type="submit" [disabled]="form.invalid">
        {{ mode === 'setup' ? 'Définir le mot de passe' : 'Se connecter' }}
      </button>
    </form>
  </div>
</div>