@if (!authService.currentUser() && !passwordPrompt()) {
  <app-login-popup (userSelected)="handleUserSelection($event)"></app-login-popup>
}

@if (passwordPrompt(); as prompt) {
  <app-password-popup 
    [mode]="prompt.mode" 
    [user]="prompt.user" 
    (success)="onPasswordSuccess()"
    (cancel)="onPasswordCancel()">
  </app-password-popup>
}

<main>
  <app-user-selection></app-user-selection>
  <router-outlet></router-outlet>
</main>